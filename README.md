
תוכן עניינים:
	מבוא
	הצגת הבעיה כתכנות ליניארי בשלמים
	מבנה הפרויקט
	טכנולוגיות וכלים
	סיכום ומסקנות
	רשימת נספחים
























	מבוא 

מציאת פתרון אופטימלי עבור יצירת מערכת שעות בבית הספר הינה בעיה מורכבת וקשה. תהליך זה כרוך בהתחשבות באילוצים רבים. יצירה ידנית של לוחות זמנים מובילה לרוב לחוסר זה , התנגשויות תזמון וניצול לא מיטבי של משאבים . בעיה זו הופכת למאתגרת יותר ככל שהנתונים גדלים, הן מצדם והן מצד האילוצים. משתנים מרובים חייבים להתאים לצרכים של מורים, תלמידים וכיתות.
בפרויקט זה נבנה מודל אינטרנטי המבוסס על תכנון לינארי המסוגל להתמודד עם אילוצים שונים על מנת לפתור את הבעיה הבאה :
יש לשבץ  מורים והרצאות לפי דרישות עבור מספר שכבות וכיתות , תוך התחשבות באילוצים ודרישות שונות , ליצירת לוח זמנים יעיל ומאוזן המקסם את ניצול המשאבים וממזער קונפליקטים .
	

מטרות הפרויקט:  
	תזמון אוטומטי – מטרת הפרויקט היא להפוך את תהליך יצירת לוחות הזמנים של בית הספר לאוטומטיים , ולבטל את צורך במאמצי תזמון ידני . זה לא רק חוסך זמן אלא גם מפחית את הסיכון לטעויות אנוש .
	אני - באמצעות אלגוריתמי אופטימיזציה מתמטיים , האפליקציה שואפת לייעל את ניצול המשאבים , למשל זמינות בכיתה ועומס העבודה של המורים . היא שואפת להקצות משאבים בצורה היעילה ביותר האפשרית .
	אפשרויות התאמה רחבה– האפליקציה נודה להתאים לאילוצים והעדפות תזמון שונות , מה שיוצר אותה למתאימה למגוון רחב של מוסדות חינוך , מבתי ספר יסודיים ועד אוניברסיטאות .
	ממשק משתמש למשתמש – ב כדי להפוך את תהליך התזמון לנגיש למנהלים ולמחנכים , הפרויקט מספק ממשק אינטרנט אינטואיטיבי שבו משתמשים יכולים להעלות נתונים , הצגה מערכות שעות בצורה נוחה וקלה להבנה.   












	פתרון הבעיה באמצעות תכנון ליניארי
בעיית תכנון ליניארי היא בעיית אופטימיזציה של פונקציה ליניארי ת תחתית אילוצים ליניאריים . כלומר , בהינתן משתנים ומערכת של אי - שוויונות בין משוואה ליניארית על הערכים ו קבוע , למצוא את הערך המקסימלי או המינימלי שפונקציה ליניארית משהו יכולה לקבל תחת קיום של כל מערכת האי שוויוני ם .
תכנון ליניארי בשלמים ( ILP - Integer Linear Programming ) מציין בעיה דומה לבעיית התכנון הליניארי , אלא שהמשתנים חייבים לקבל ערכים שלמים דווקא . אתה לבעיית תכנון ליניארי רגילה שלה יש אלגוריתם פולי נומי הפותר אותה , בעיה זאת היא NP קשה . 
 
על מנת לפתור את בעיית המערכת השעות יש להגדיר מספר פרמטרים: משתני החלטה, פונקציית מטרה, אילוצים והגדרת הבעיה כלומר האם נרצה למקסם או לצמצם אותה.
הבעיה היא נרצה לפתור את מערכת שעות עבור בית ספר. בבעיה זו עלינו לתת פתרון למערכת האילוצים של מערכת השעות עבודה, הכיתות, המורים, השכבות, הימים, משבצות הזמן והמקצועות. בתרגום לבעיית האופטימיזציה, פונקציית יש לנו מיקסום מספר השיבוצים של מורים ומקצועות עבור כיתות ושכבות, תוך כדי מתן חשיבות עבור האילוצים.
על סמך את הפרמטרים שלך עבור פתרון בעיות ILP .
על סמך הגדרת ההגדרה נרצה למקסם את התוצאות.
לכל מורה t , מקצוע s , יום d , שעה h , וכיתה g , מגדירים x , אשר יכול לקבל ערך 0 או ערך 1. המשתנה יקבל ערך 1 אם המורה t מלמד את הכיתה g את המקצוע s ביום ד ובשעה h , אחרת יקבל ערך 1. 0.
מתמטית, בהינתן קבוצת המורים (), קבוצת המקצועות (), קבוצת הימים(), קבוצות הזמנים(), קבוצת הכיתות() וקבוצת השכבות().
נגד משתן ההחלטה בדרך הבאה:

נגדיר x המייצג: מורה המלמד מקצוע ביום ושעה ,כיתה השייכת לשכבה
x[מורה,מקצוע,משבצת_זמן,יום,כיתה,שכבה] ∈ {0,1}			
על סמך אילוצים שיוגדרו בהמשך נקבל 1 כאשר ערך זה עומד בתנאים אחרים, 0

כעת, לאחר שהגדרנו את המשתני ההחלטה ואת הגדרת הבעיה (מקסום / צמצום) נבנה את הפונקציונליות שלנו, כלומר נרצה למקסם את ההשמות האפשריות השעות ולפיכך הפונקציה היא כוללת כל משתני ההחלטה:

∑_(t∈Teachers,s∈s,   ts∈Time_slots,d∈Day,c∈classroom,g∈grades)▒〖x[t,s,ts,d,c,g]〗




ולבסוף, נרצה להגדיר את האילוצים שעל פיהם יבחרו ההשמות האופטימליות
דוגמה  לחלק מהאילוצים:
	מורה לא יכול ללמד יותר מכיתה אחת באותה שעה ובאותו היום.
	מורה לא יחרוג כמות השעות שהוא המוקצות לו.
	ניתן להגדיר ימי חופש למורה, בהם המורה לא מלמד.
	מורה ילמד רק מקצועות החוק.
	מספר השיעורים עבור כל מקצוע בכל כיתה יהיה על פי הדרישות.

יש אילוצים שקל להגדיר מתמטית (ופשוטים יותר לתכנות)
∑_(t∈Teachers,   l∈Lectures,c∈Classroom,g∈Grade) x[t,l,ts,d,c,g] 

וישנם אילוצים מורכבים יותר למי דול מתמטי כמו עדיפות לשעות מוקדמות, כך שלא יהיו חלונות.
























באופן מעשי ניתן לראות מימוש ב python באמצעות ספריית pulp

ספריית Pulp היא ספרייה בשפת python שמשמשת לבניית ופתרון בעיות אופטימיזציה. היא מסייעת בפתרון מגוון רחב של בעיות מתמטיות ולוגיות, בעיות ליניאריות, משתנים שלמים, ועוד .

עם Pulp , ניתן להגדיר משתנים, אובייקטיבים (פונקציית עניין), ומגבלות ליניאריות ולוגיות. לאחר הגדרת הבעיה, כמו כן יש מגוון אלגוריתמי אופטימיזציה אשר ניתן להשתמש .

בקוד הבא אנו רואים את הגדרת הבעיה, הגדרת המשתנים, ופונקציית המטרה.
     # תגדיר את הבעיה
    prob = LpProblem ( "School_Scheduling" , LpMaximize )
   
    # הגדר את משתני ההחלטה
    איקס = LpVariable . dicts ( "x" , [( מורה , הרצאה , משבצת זמן , יום , כיתה , כיתה ) עבור מוֹרֶה  ב מורים ל כיתה ב ציוני ל כיתה ב כיתות ל הַרצָאָה ב הרצאות ל מרווח זמן ב חריצי זמן ל יְוֹם ב days ], cat = 'בינארי' )
    # הגדר את פונקציית המטרה כאן
    prob += lpsum ( x )
    

בחלק זה ניתן לראות מספר אילוצים לדוגמה
    ל יְוֹם ב ימים :
        ל זְמַן  ב חריצי זמן :
            ל מוֹרֶה ב מורים :
                # מורה יכול ללמד רק הרצאה אחת בכל פעם
                prob += lpSum ( x [( מורה , הרצאה , שעה , יום , כיתה , כיתה )] עבור כיתה ב ציוני ל כיתה ב כיתות ל הַרצָאָה ב הרצאות ) <= 1

        ל מוֹרֶה ב מורים :
            אם יְוֹם ב מורים [ מורה ][ 2 ]:
                ל זְמַן ב חריצי זמן :
                    למורה אחד יש ימי חופש
                    prob += lpSum ( x [( מורה , הרצאה , שעה , יום , כיתה , כיתה )] עבור כיתה ב ציוני ל כיתה ב כיתות ל הַרצָאָה ב הרצאות ) == 0
    
        ל כיתה ב ציוני :
            ל כיתה ב כיתות לימוד :
                אם כיתה ב ציונים [ כיתה ]:
                    ל זְמַן ב חריצי זמן :
                        prob += lpSum ( x [( מורה , הרצאה , שעה , יום , כיתה , כיתה )] עבור מוֹרֶה ב מורים ל הַרצָאָה ב הרצאות ) <= 1




	מבנה הפרויקט :
פרויקט זה בנוי משני חלקים backend ו- frontend , המקושרים על ידי flask .
בקבוק היא ספרייה ליישומי אינטרנט שנכתבה ב- פיתון . היא מספקת כלי פשוט וגמיש לפיתוח ובניית אפליקציות רשת, והיא מעשהת בייצוג והגעת נקודות קצה יעילה ופשוטה.
ה- fronted - נכתב ב html css ו- js 
בדף משתמש על המשתמש להעלות קובץ json יו יקבל 3 תצוגות של מערכת שעות. תצוגת מורים, כיתות/שכבות וימים.
מוצג יכול לבחון את ההיבטים שונים.
דוגמה למבנה הקובץ:
Grades – מכיל בתוכו את הדרישות, אילו שכבות וכיתות קיימות בו, בנוסף אילו מקצועות מלומדים , כמה משבצות זמן עבור כל אחד מהם ומי המורה המלמד אותם.
מורים - מערך המכיל את מספר השעות השבועיות המקסימליות עבור מורה, מקצועות שהוא מלמד, וימי חופש גורם הוא לא ילמד.
הרצאות – מערך של מקצועות
Classroom – מערך של כיתות
Time_slots – מערך של זמנים
ימים – מערך של ימים






	












דוגמה לקובץ
{
    "נתונים" : {
        "ציוני" : {
            "א" : {
                "A1" : {

                    "מדע" : [ 3 , "וויליאמס" ],
                    "היסטוריה" : [ 3 , "ג'ונסון" ],
                    "גיאוגרפיה" : [ 3 , "סמית" ],
                    "מתמטיקה" : [ 3 , "ג'ונסון" ]
                    
},
                "A2" : {

                    "מדע" : [ 3 , "וויליאמס" ],
                    "היסטוריה" : [ 3 , "ג'ונסון" ]
}
},
            "B" : {
                "B1" : {

                    "מדע" : [ 3 , "סמית" ],
                    "היסטוריה" : [ 3 , "ג'ונסון" ],
                    "מתמטיקה" : [ 3 , "וויליאמס" ]

},
                "B2" : {

                    "מדע" : [ 3 , "סמית" ],
                    "היסטוריה" : [ 3 , "סמית" ],
                    "מתמטיקה" : [ 3 , "וויליאמס" ]
}
}
},
        "מורים" : {
            "סמית" : [ 16 , [ "מתמטיקה" , "היסטוריה" , "מדע" , "אנגלית" , "מתמטיקה" ], [ "שישי" , "שני" ]],
            "ג'ונסון" : [ 16 , [ "אנגלית" , "מתמטיקה" , "מדע" , "היסטוריה" ], [ "שישי" ]],
            "וויליאמס" : [ 16 , [ "מדע" , "אנגלית" , "גיאוגרפיה" , "מתמטיקה" ], [ "N" ]]
},
        
        "הרצאות" : [ "היסטוריה" , "מדע" , "גיאוגרפיה" , "מתמטיקה" , "אנגלית" ],
        "classroom" : [ "A1" , "A2" , "B1" , "B2" ],
        "time_slots" : [ "8-9" , "9-10" , "11-12" , "12-13" , "12-14" , "14-15" , "15-16" , "16- 17 אינץ' ],
        "ימים" : [ "יום ראשון" , "שני" , "שלישי" , "רביעי" , "חמישי" , "שישי" ]
}
}

	לאחר העלאת קובץ יתקבלו התצוגות הבאות:
 
 
 



הקצה האחורי נכתב ב python 
תפקידו הוא לקרוא את הדאטה של קובץ ה- Json מבצע בדיקות מקדימות עבור הקלט על מנת לחסוך זמן ריצה, למשל מספר שעות הלימוד שהמרצה קיבלה לא חורג מהמקסימום הרשום לו.
מידע וקרתה שגיאה תראה הודעת שגיאה.
אחרת, יתבצע אופטימיזציה על ידי cbc או סימפלקס , מידע וסימפלקס ייכשל ינסה באמצעות cbc .
המערכת תארגן את הדאטה ותעביר זאת באמצעות flask לדפי ה html המתאימה, ששם יבוצע תרגום לידי בלאות ותצוגת מערכת השעות.






























	טכנולוגיות וכלים:
	Python 3 – שפת התכנות המרכזית המשמשת את הפרויקט.
	Flask – מסגרת אינטרנט של python המשמשת ליצירת הקצה האחורי של האפליקציה.
	ספריית pulp – ספרייה לתכנות לינארי המשמשת לכתיבת האילוצים ולפתירתם.
	CBC solver – פוותר ILP בקוד פתוח, משמש כברירת מחדל ב ספריית pulp
	פותר GLPK – פותר חיצוני המשמש למשימות אופטימיזציה, חלק מספריית קוד פתוח המספק לפתרון בעיות LP ו- ILP משתמש בסימפלקס
	שימוש בשפות HTML, CSS ,JAVASCRIPT

	סיכו ם:
פרויקט זה היה מאתגר  מאוד . למדתי איך לקחת בעיה מחיי היום יום, לתרגם למודל מתמטי ולפתור באמצעות אותה תכנון לינארי , כמו כן למדתי איך לעבוד עם שפות שונות ולמשק אותם יחד, חקרתי נושא חדש ללא ידע מוקדם , עבדתי עם סביבות שונות ואיחדתי אותם על מנת שיעבדו יחדיו.
הקושי המרכזי בפרויקט הוא ביצוע ולידציה עבור הארגון, לפי מספר אפשרויות של תשובות נכונות , כמו כן בעת הגדרת האילוצים יש לשים שהאילוצים אינם סותרים אחד את השני.
יש להגדיר בצורה מדויקת את הבעיה היא רצינו לפתור ובכך ניתן להגדיר את הפונקציה בצורה מיטבית.

מסקנות :
	הפרויקט מור עזר לוח בפתרון בעיות רבות וכבות הנקשרות ליצירת זמנים בבתי הספר. המערכת יכולה להיות מותאמת למגוון רחב של מוסדות חינוך .
	שימוש בטכנולוגיות מתקדמות כמו Flask, Pulp ו– GLPK Solver תורם לפרויקט ביצירת ממשק ובפתרון אופטימיזציה מתמטית יעילה .
	הפרויקט יכול לחשב בבתי העסק תזמון השעות, לחסוך זמן ומאמץ אנושי ולהפוך את זה למשימה פשוטה ומהירה .
	ממשק משתמש הידידותי האפשרי למנהלי בתי הספר עובדים ולהיות ביציבה מעולה על מערכת השעות ולקבוע את הלוחות הזמנים בצורה יעילה .
סיכום זה משקף את הרווח והרווחה הגדולה שבמערכת השעות האוטומטית שמתכוונת לספק. הפרויקט מביא לפתרון יעיל ומתמטי שמאפשר להתקדם התזמון בתי ומציע פתרון מתקדם לבעיות להקצאת משאבים בצורה אופטימלית .
# final_project
